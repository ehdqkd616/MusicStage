# :musical_note: MusicStage (음악 통합 커뮤니티) 
코로나 19로 인하여 뮤지션의 무대가 줄어들고, 온라인에서 활동할 수 있는 공간이 필요해졌다. 기존의 커뮤니티 사이트의 단점을 보완하여 소셜 기반의 게시판과 메신저를 이용한 자유로운 소통, 관심 분야에 따른 친구 매칭 서비스, 친숙한 SNS UI를 차용한 감각 있는 디자인을 통해 이용자들에게 편의성과 실용성을 모두 만족시킬 수 있는 사이트를 만들고자 하였다.

### 개발 환경
- **Operating System** : Window OS, MAC OS
- **Server** : Apache Tomcat 9.0
- **Database** : Oracle Database 18c
- **Development Tool** : Eclipse, Spring Tools Suite 4, Visual Studio Code, sqlDeveloper version 19.2.1.247, Apache Maven
- **Development Language** :  Java, JavaScript, jQuery, HTML5, CSS3, SQL, JSTL
- **Framework** : Spring, Mybatis
- **Team Coop** : Github, ERDCloud, kakaoOven
- **API** : Swipper, Kakao Map, Kakao Login, SMTP
- **Technologies used** : WebSocket, jQuery, Ajax, Push Notification


### 구현 기능
- **회원** : 회원가입(일반 회원가입, 카카오 회원가입 api, 카카오 맵 api), 회원정보 보기, 회원정보 수정(프로필 사진 등록/수정/삭제), 회원탈퇴, 로그인(일반 로그인, 카카오 로그인 api), 로그아웃, 계정 찾기(이름, 이메일 이용, Gmail api), 선호하는 관심사, 팔로잉, 스테이지(회원 상세 페이지 - 회원의 게시물 모아보기)

- **게시판** : 게시글 리스트 조회 및 검색(카테고리, 필터 별 검색), 게시글 피드형식/보드형식 조회, 게시글 등록/수정/삭제, 댓글과 대댓글 등록/수정/삭제, 이미지/동영상/오디오 파일 업로드

- **실시간 채팅** : 회원 간 실시간 채팅 및 브라우저 알림, 채팅 내용 DB 저장

- **푸쉬 알림** : 댓글, 팔로잉, 좋아요, 전문가 등록요청, 게시글 등록요청, 회원/게시글 신고 처리에 대한 실시간 푸쉬 알림 및 알림 메세지 DB 저장

- **관리자** : 공지사항 등록, 전문가 등록 요청 승인/거부, 게시글 등록 요청 승인/거부, 회원/게시글 신고 승인/거부 및 패널티 처리

- **메인페이지** : 네비게이션 바, 검색 바, 카테고리 퀵 메뉴, 배너 인기서비스 목록(슬라이드 이미지)

### DB 설계
![MusicStage ERD](https://user-images.githubusercontent.com/64412357/103772776-6325a180-506d-11eb-8407-85ec57c1eab0.png)

 - **게시판 관련 테이블** : 네 가지의 게시판을 ‘게시판 카테고리’ 컬럼으로 구분하여 하나의 테이블로 구성하였다. 모든 카테고리에서 사용하는 컬럼은 ‘NOT NULL’ 제약조건을 걸어 필수적으로 입력 값을 받도록 하였고, 게시판에 따라서 선택적으로 사용 가능한 컬럼들은 ‘Nullable’로 처리하였다. 이 외에 다른 목적으로 사용되는 게시판과 첨부파일은 ‘게시판 테이블’, ‘첨부파일 테이블’을 한 쌍으로 하여 각각 테이블을 따로 만들어 관리하였다.
 - **첨부파일 테이블** : 첨부파일의 확장자에 따라서 파일 종류를 ‘IMAGE’, ‘AUDIO’, ‘VIDEO’로 구분하여 관리하였고, ‘FILE_THUMBNAIL’ 컬럼을 두어 썸네일 파일을 구분하였다.
 - **알림 관련 테이블** : 푸쉬 알림을 DB에 기록하기 위해 알림이 발생하는 모든 테이블의 기본키를 외래키로 설정하여 제약조건을 설정하였고, ‘ALARM_TYPE’ 컬럼으로 알림이 발생한 테이블과 알림 클릭 시의 액션을 구분하였다. 
 - **채팅 관련 테이블** : ‘CHATTING_ROOM’ 테이블을 이용하여 채팅방을 생성하고, ‘JOIN_ROOM’ 테이블을 통해서 채팅방을 구분하여 관리한다. 1대1 채팅 시스템이기 때문에 채팅방 생성 시 ‘JOIN_ROOM’ 테이블에는 채팅에 참여하는 ‘본인’과 ‘상대방’의 정보가 동일한 ‘CHATROOM_ID’로 입력되어 두 개의 행이 생성된다.


## :desktop_computer: 화면 일부<br><br>
 - 메인화면<br>

![](./images/image/main.JPG)
<br>
**메인화면은 자동으로 슬라이드 되면서 넘어가고, 버튼을 통해 수동으로 넘길수도 있습니다. <br>
화면 우측에는 최근에 본 호텔과 코스를 볼 수 있고, 카카오톡 고객센터 기능을 사용할 수 있습니다. <br> 
고객센터는 카카오톡 플러스 친구 TRIP2REAP과 연동되어 사용이 가능합니다. <br>
화면 상단에는 로그인과 회원가입 버튼이 있고, 사용자는 로그인을 통해 보다 다양한 서비스를 이용할 수 있습니다.**

<br><br>

 - 로그인<br>

![](./images/image/login.JPG)
<br>
**① Modal을 이용하여, 모든 페이지 내에서 로그인창을 띄울 수 있도록 하였습니다. <br>
② 기본로그인, 카카오 로그인, 네이버 로그인이 가능하여 사용저의 편리성과 접근성을 증가시켰습니다. <br>
또한, 카카오 로그인과 네이버 로그인은 별도의 회원가입 없이 이용이 가능합니다.<br>
③ 아이디 저장 시 쿠키에 아이디를 저장하여, 다음 로그인 시 자동으로 아이디를 출력합니다.<br>
④ 휴대전화 또는 이메일을 통해 아이디를 찾을 수 있고, 아이디와 이메일을 통해 비밀번호를 변경할 수 있습니다.**


<br><br>

 - 회원가입<br>

![](./images/image/join.JPG)
<br>
**각 항목마다 규칙에 어긋난 값을 입력할 경우 빨간색 글씨로 알림메시지를 띄워줍니다. <br>
또 회원가입을 위해서는 반드시 이메일 인증을 해야하는데요~ 10분 안에 메일 인증을 완료해야 합니다. <br> 시간이 초과되면 alert창이 뜨고, 다시 인증버튼이 생성됩니다.**

<br><br>

 - 마이페이지 일부<br>

![](./images/myPage.JPG)

<br><br>

 - 여행코스 리스트<br>

![](./images/image/courseList.JPG)
<br>
**사용자가 만든 코스를 보여줍니다. 코스제목, 작성자, 여행코스, 총거리, 표지이미지를 볼 수 있습니다. <br>
또한 사용자는 각 테마를 선택하여, 다양한 코스를 볼 수 있습니다.**

<br><br>

 - 여행코스 등록<br>

![](./images/image/insertCourse1.JPG)
![](./images/image/insertCourse2.jpg)
<br>
**①사용자는 표지 이미지를 선택할 수 있습니다. 자바 스크립트를 사용하여, 사용자가 첨부한 이미지는 즉시 화면에 출력됩니다. <br>
②사용자는 코스로 짜고싶은 장소를 키워드를 통해 검색할 수 있고, 여행코스로 추가할 수 있습니다. 사용자가 여행코스를 추가하면, 해당 장소의 이름, 위도, 경도 데이터를 파싱해옵니다. 파싱한 위도 경도를 활용하여 두 장소간의 거리를 계산하고, 오른쪽 화면에 여행지 이름과 두 장소간의 거리가 출력됩니다. <br>
③지도에는 여행코스가 보기 쉽게 선 형태로 나타납니다. 저는 사용자가 동선을 생각하면서 효율적으로 코스를 짤 수 있도록 기능을 구현해 보았습니다. <br><br>
각 장소마다의 이름, 경도, 위도를, 또 다음 장소의 이름, 경도 위도를 모두 저장해야 하기에, 데이터 관리의 문제가 발생하였습니다. 이를 해결하고자 데이터 베이스 등록시 하나의 문자열로 묶었고 쉼표로 구분해 주었습니다.최종적으로 데이터베이스에는 String 타입으로 들어갑니다. 그리고 쉼표로 구성된 문자열을, 뷰로 그대로 가져와 jstl의 split 함수를 활용하여 배열로 변경해주었습니다. 최종적으로 배열을 가지고 여행코스 리스트를 출력합니다.**


<br><br>

 - 여행코스 조회<br>

![](./images/image/courseDetail.JPG)

<br><br>



## 활용 기술 스택
- Language: Java, JavaScript, jQuery, Ajax, Websocket
- API: Kakao 회원가입·로그인, Kakao Map(도로명 주소에 해당하는 지도 위치 표시), Gmail(비밀번호 찾기 임시비밀번호 전송)
- Framework: Spring
- Database: Oracle Database 18c
